
(function($){$.subscribeHandler('_struts2_jquery_hide',function(event,data){$(this).hide();});$.subscribeHandler('_struts2_jquery_show',function(event,data){$(this).show();});$.subscribeHandler('_struts2_jquery_remove',function(event,data){$(this).remove();});$.subscribeHandler('_struts2_jquery_enable',function(event,data){$(this).attr("disabled","false");});$.subscribeHandler('_struts2_jquery_disable',function(event,data){$(this).attr("disabled","disabled");});$.subscribeHandler('_struts2_jquery_focus',function(event,data){$(this).focus();});$.subscribeHandler('_struts2_jquery_blur',function(event,data){$(this).blur();});$.subscribeHandler('_struts2_jquery_container_load',function(event,data){var container=$(event.target);var attributes=container[0].attributes;var options={};for(var i=0;i<attributes.length;i++){options[attributes[i].name.toLowerCase()]=attributes[i].value;}
$.extend(options,event.data);$.extend(options,data);if(options){var indicatorId=options.indicatorid;if(indicatorId){$('#'+indicatorId).show();}
var onAlwaysTopics=options.onalwaystopics;if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}
if(options.onbeforetopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}
if(options.loadingtext){container.html(options.loadingtext);}
var onSuccessTopics=options.onsuccesstopics;options.success=function(data,textStatus){if(indicatorId){$('#'+indicatorId).hide();}
container.html(data);if(onSuccessTopics){var topics=onSuccessTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}}
var onCompleteTopics=options.oncompletetopics;options.complete=function(xhr,textStatus,errorThrown){if(indicatorId){$('#'+indicatorId).hide();}
if(xhr.status==404){container.html(xhr.responseText);}
if(onCompleteTopics){var topics=onCompleteTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}}
var onErrorTopics=options.onerrortopics;options.error=function(XMLHttpRequest,textStatus,errorThrown){if(options.errortext){container.html(options.errortext);}
if(onErrorTopics){var topics=onErrorTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){container.publish(topics[i],container);}}}
var serializeData;var formIds=options.formids;if(formIds){var forms=formIds.split(',');for(var i=0;i<forms.length;i++){serializeData=(serializeData?(serializeData+"&"):"")+$("#"+forms[i]).serialize();}}
var elementIds=options.elementids;if(elementIds){var elements=elementIds.split(',');for(var i=0;i<elements.length;i++){var element=$('#'+elements[i])[0];if(element&&element.name){serializeData=(serializeData?(serializeData+"&"):"")+element.name+"="+element.value;}}}
$.extend(options,{data:serializeData});if(options.reloadtopics){var topics=options.reloadtopics.split(',');for(var i=0;i<topics.length;i++){container.unsubscribe(topics[i]);container.subscribe(topics[i],'_struts2_jquery_container_load',options);}}
if(options.src){options.type="POST";options.url=options.src;$.ajax(options);}}});$.subscribeHandler('_struts2_jquery_action_request',function(event,data){var action=$(event.target);var options=event.data;$.extend(options,data);if(options){if(options.indicatorid){$('#'+options.indicatorid).show();}
var indicatorId=options.indicatorid;var onSuccessTopics=options.onsuccesstopics;options.success=function(data,textStatus){if(indicatorId){$('#'+indicatorId).hide();}
if(onSuccessTopics){var topics=onSuccessTopics.split(',');for(var i=0;i<topics.length;i++){action.publish(topics[i],action);}}}
var onCompleteTopics=options.oncompletetopics;options.complete=function(xhr,textStatus,errorThrown){if(indicatorId){$('#'+indicatorId).hide();}
if(onCompleteTopics){var topics=onCompleteTopics.split(',');for(var i=0;i<topics.length;i++){action.publish(topics[i],action);}}}
var onErrorTopics=options.onerrortopics;options.error=function(XMLHttpRequest,textStatus,errorThrown){if(onErrorTopics){var topics=onErrorTopics.split(',');for(var i=0;i<topics.length;i++){action.publish(topics[i],action);}}}
var formIds=options.formids;if(formIds){var formData;var forms=formIds.split(',');for(var i=0;i<forms.length;i++){formData=(formData?"&":"")+$("#"+forms[i]).serialize();}
$.extend(options,{data:formData});}
if(options.src){options.type="POST";options.url=options.src;$.ajax(options);}}});$.subscribeHandler('_struts2_jquery_dialog_open',function(event,data){$(this).dialog('open');});$.subscribeHandler('_struts2_jquery_dialog_close',function(event,data){$(this).dialog('close');});$.subscribeHandler('_struts2_jquery_dialog_destroy',function(event,data){$(this).dialog('destroy');});$.subscribeHandler('_struts2_jquery_dialog_enable',function(event,data){$(this).dialog('enable');});$.subscribeHandler('_struts2_jquery_dialog_disable',function(event,data){$(this).dialog('disable');});$.subscribeHandler('_struts2_jquery_reloadTab',function(event,data){$(this).tabs('load',event.data);});$.subscribeHandler('_struts2_jquery_selectTab',function(event,data){$(this).tabs('select',event.data);});$.subscribeHandler('_struts2_jquery_disableTab',function(event,data){$(this).tabs('disable',event.data);});$.subscribeHandler('_struts2_jquery_enableTab',function(event,data){$(this).tabs('enable',event.data);});$.subscribeHandler('_struts2_jquery_removeTab',function(event,data){$(this).tabs('remove',event.data);});$.subscribeHandler('_struts2_jquery_showTab',function(event,data){$(this).tabs('show',event.data);});$.subscribeHandler('_struts2_jquery_hideTab',function(event,data){$(this).tabs('hide',event.data);});$.subscribeHandler('_struts2_jquery_select_load',function(event,data){var input=$(event.target);var attributes=input[0].attributes;var options={};for(var i=0;i<attributes.length;i++){options[attributes[i].name.toLowerCase()]=attributes[i].value;}
$.extend(options,data);if(options){var indicatorId=options.indicatorid;if(indicatorId){$('#'+indicatorId).show();}
if(options.loadingtext){input.txt(options.loadingtext);}
var onAlwaysTopics=options.onalwaystopics;if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}
if(options.onbeforetopics){var topics=options.onbeforetopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}
var onSuccessTopics=options.onsuccesstopics;options.success=function(data,textStatus){if(indicatorId){$('#'+indicatorId).hide();}
input[0].length=0;if(typeof(data)=="object"||$.isArray(data)){var i=-1;if(options.headerkey&&options.headervalue){var option=document.createElement("option");option.value=options.headerkey;option.text=options.headervalue;if(options.value==options.headervalue){option.selected=true;}
input[0].options[++i]=option;}
if(options.emptyoption){input[0].options[++i]=document.createElement("option");}
for(var key in data){var option=document.createElement("option");option.value=key;option.text=data[key];if(options.value==option.value){option.selected=true;}
input[0].options[++i]=option;}}
if(onSuccessTopics){var topics=onSuccessTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}}
var onCompleteTopics=options.oncompletetopics;options.complete=function(xhr,textStatus,errorThrown){if(indicatorId){$('#'+indicatorId).hide();}
if(onCompleteTopics){var topics=onCompleteTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}}
var onErrorTopics=options.onerrortopics;options.error=function(XMLHttpRequest,textStatus,errorThrown){if(options.errortext){container.html(options.errortext);}
if(onErrorTopics){var topics=onErrorTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}
if(onAlwaysTopics){var topics=onAlwaysTopics.split(',');for(var i=0;i<topics.length;i++){input.publish(topics[i],input);}}}
var serializeData;var formIds=options.formids;if(formIds){var forms=formIds.split(',');for(var i=0;i<forms.length;i++){serializeData=(serializeData?(serializeData+"&"):"")+$("#"+forms[i]).serialize();}}
var elementIds=options.elementids;if(elementIds){var elements=elementIds.split(',');for(var i=0;i<elements.length;i++){var element=$('#'+elements[i])[0];if(element&&element.name){serializeData=(serializeData?(serializeData+"&"):"")+element.name+"="+element.value;}}}
$.extend(options,{data:serializeData});if(options.src){options.type="GET";options.url=options.src;options.dataType="json";$.ajax(options);}}});$.subscribeHandler('_struts2_jquery_form_submit',function(event,data){var form=$(event.target);form.submit();});_struts2_jquery={bind:function(el){if(el){var $el=$(el);el=$el[0];var attributes=el.attributes;var options={};for(var i=0;i<attributes.length;i++){options[attributes[i].name.toLowerCase()]=attributes[i].value;}
var tag=el.tagName.toLowerCase();if(tag=="div"){if(el.className.indexOf("_struts2_jquery_class_tabbedpane")>=0){tag="tabbedpane";}else if(el.className.indexOf("_struts2_jquery_class_dialog")>=0){tag="dialog";}}
this[tag]($el,options);}},base:function($elem,options){if(options.hidetopics){var topics=options.hidetopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_hide',options);}}
if(options.showtopics){var topics=options.showtopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_show',options);}}
if(options.removetopics){var topics=options.removetopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_remove',options);}}},interactive:function($elem,options){if(options.enabletopics){var topics=options.enabletopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_enable',options);}}
if(options.disabletopics){var topics=options.disabletopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_disable',options);}}},container:function($elem,loadHandlerName,options){if(options.reloadtopics){var topics=options.reloadtopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],loadHandlerName,options);}}},input:function($elem,loadHandlerName,options){if(options.reloadtopics){var topics=options.reloadtopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],loadHandlerName,options);}}
if(options.focustopics){var topics=options.focustopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_focus',options);}}
if(options.blurtopics){var topics=options.blurtopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_blur',options);}}
if(options.onchangetopics){var topics=options.onchangetopics.split(',');for(var i=0;i<topics.length;i++){$elem.publishOnEvent('change',topics[i]);}}
if(options.onfocustopics){var topics=options.onfocustopics.split(',');for(var i=0;i<topics.length;i++){$elem.publishOnEvent('focus',topics[i]);}}
if(options.onblurtopics){var topics=options.onblurtopics.split(',');for(var i=0;i<topics.length;i++){$elem.publishOnEvent('blur',topics[i]);}}},action:function($elem,containerLoadHandlerName,linkLoadHandlerName,options){if($elem.attr('href')){$elem.attr('href','#');}
if(options.onclicktopics){var topics=options.onclicktopics.split(',');for(var i=0;i<topics.length;i++){$elem.publishOnEvent('click',topics[i]);}}
var actionTopic='_struts2_jquery_action_topic_'+options.id;var href=options.href;if(options.targets){$(function(){var topics=options.targets.split(',');for(var i=0;i<topics.length;i++){var target=topics[i];if('#tab'==target){$elem.closest('.ui-tabs-panel').subscribe(actionTopic,containerLoadHandlerName,options);}else{$('#'+target).subscribe(actionTopic,containerLoadHandlerName,options);}}});}else{if(href!=null||options.oncompletetopics||options.onsuccesstopics||options.onerrortopics){$elem.subscribe(actionTopic,linkLoadHandlerName,options);}}
options.src=href;if(options.validate){options.enableJSONValidation='true';}
$elem.publishOnEvent('click',actionTopic);},select:function($elem,options){var loadHandlerName='_struts2_jquery_select_load';this.base($elem,options);this.interactive($elem,options);this.input($elem,loadHandlerName,options);if(options.src){$elem.bind('struts2_jquery_topic_load',null,_subscribe_handlers[loadHandlerName]);$elem.trigger('struts2_jquery_topic_load',options);}},div:function($elem,options){var loadHandlerName='_struts2_jquery_container_load';this.base($elem,options);this.container($elem,loadHandlerName,options);if(options.src){$elem.bind('struts2_jquery_topic_load',null,_subscribe_handlers[loadHandlerName]);$elem.trigger('struts2_jquery_topic_load',options);}},form:function($elem,options){var submitHandlerName='_struts2_jquery_form_submit';var containerLoadHandlerName='_struts2_jquery_container_load';this.base($elem,options);if(options.onsubmittopics){var topics=options.onsubmittopics.split(',');for(var i=0;i<topics.length;i++){$elem.publishOnEvent('submit',topics[i]);}}
if(options.submittopics){var topics=options.submittopics.split(',');for(var i=0;i<topics.length;i++){var targetId=options.targetid;if(targetId){options.src=options.action;options.formids=options.id;if('#tab'==targetId){$elem.closest('.ui-tabs-panel').subscribe(topics[i],containerLoadHandlerName,options);}else{$('#'+targetId).subscribe(topics[i],containerLoadHandlerName,options);}}else{$elem.subscribe(topics[i],submitHandlerName,options);}}}},a:function($elem,options){var linkLoadHandlerName='_struts2_jquery_action_request';var containerLoadHandlerName='_struts2_jquery_container_load';this.base($elem,options);this.interactive($elem,options);this.action($elem,containerLoadHandlerName,linkLoadHandlerName,options);},button:function($elem,options){var linkLoadHandlerName='_struts2_jquery_action_request';var containerLoadHandlerName='_struts2_jquery_container_load';this.base($elem,options);this.interactive($elem,options);this.action($elem,containerLoadHandlerName,linkLoadHandlerName,options);$elem.attr('type','button');$elem.removeAttr('name');},dialog:function($elem,options){if(options.hidetopics){var topics=options.hidetopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_dialog_close',options);}}
if(options.showtopics){var topics=options.showtopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_dialog_open',options);}}
if(options.removetopics){var topics=options.removetopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_dialog_destroy',options);}}
if(options.enabletopics){var topics=options.enabletopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_dialog_enable',options);}}
if(options.disabletopics){var topics=options.disabletopics.split(',');for(var i=0;i<topics.length;i++){$elem.subscribe(topics[i],'_struts2_jquery_dialog_disable',options);}}
var parameters={};parameters.autoOpen=false;parameters.modal=eval(options.modal?options.modal:false);parameters.resizable=eval(options.resizable?options.resizable:true);parameters.draggable=eval(options.draggable?options.draggable:true);if(options.height){parameters.height=eval(options.height);}
if(options.width){parameters.width=eval(options.width);}
if(options.position){parameters.position=eval(options.position);}
if(options.title){$elem.attr("title",options.title);}
if(options.data){$elem.data=options.data;}
if(options.buttons){parameters.buttons={};var buttontopics;if(options.buttontopics){buttontopics=options.buttontopics.split(',');}else{buttontopics=[];}
var $dialog=$elem;$dialog.data('buttonTopics',{});var buttons=options.buttons.split(',');for(var i=0;i<buttons.length;i++){var button=buttons[i];var topic=buttontopics[i];if(buttontopics.length>=i+1){$dialog.data('buttonTopics')[button]=topic;parameters.buttons[button]=function(event){$elem.publish($dialog.data('buttonTopics')[event.target.innerHTML],$dialog)};}else{parameters.buttons[button]=function(event){};}}}
$elem.css("display","none");if(options.src){$elem.bind('dialogopen',function(event,ui){var loadHandlerName='_struts2_jquery_container_load';var $dialogContent=$(".ui-dialog-content",$elem);$dialogContent.bind('struts2_jquery_topic_load',null,_subscribe_handlers[loadHandlerName]);$dialogContent.trigger('struts2_jquery_topic_load',options);});}
$elem.dialog(parameters);},tabbedpane:function($elem,options){var $tabs=$elem.tabs({cache:(options.iscache||false),selected:options.selected});("a",$tabs).each(function(tabIndex,el){$tab=$(el);if($tab.attr("isdisabled")){$tabs.tabs('disable',tabIndex);}
if($tab.attr("isselected")){$tabs.tabs('select',tabIndex);}
var hideTopics=$tab.attr("hidetopics");if(hideTopics){var topics=hideTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_hideTab',tabIndex);}}
var showTopics=$tab.attr("showtopics");if(showTopics){var topics=showTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_showTab',tabIndex);}}
var removeTopics=$tab.attr("removetopics");if(removeTopics){var topics=removeTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_removeTab',tabIndex);}}
var reloadTopics=$tab.attr("reloadtopics");if(reloadTopics){var topics=reloadTopic.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_reloadTab',tabIndex);}}
var focusTopics=$tab.attr("focustopics");if(focusTopics){var topics=focusTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_selectTab',tabIndex);}}
var blurTopics=$tab.attr("blurtopics");if(options.blurtopics){var topics=blurTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_blur',tabIndex);}}
var enableTopics=$tab.attr("enabletopics");if(enableTopics){var topics=enableTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_enableTab',tabIndex);}}
var disableTopics=$tab.attr("disabletopics");if(disableTopics){var topics=disableTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.subscribe(topics[i],'_struts2_jquery_disableTab',tabIndex);}}
var onChangeTopics=$tab.attr("onchangetopics");if(onChangeTopics){var topics=onChangeTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.publishOnEvent('change',topics[i]);}}
var onFocusTopics=$tab.attr("onfocustopics");if(onFocusTopics){var topics=onFocusTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.publishOnEvent('focus',topics[i]);}}
var onBlurTopics=$tab.attr("onblurtopics");if(onBlurTopics){var topics=onBlurTopics.split(',');for(var i=0;i<topics.length;i++){$tabs.publishOnEvent('blur',topics[i]);}}});}};})(jQuery);